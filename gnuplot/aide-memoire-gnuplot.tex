\documentclass[a4paper,twoside]{article}
\usepackage{autiwa}

\title{Aide mémoire gnuplot}
\author{Autiwa}

\makeindex
\begin{document}

\tableofcontents

\clearpage

\section{Préambule}
Gnuplot permet de tracer des courbes de manière plus ou moins complexes, en 2D ou en 3D. Ce formulaire est là pour donner des pistes et pouvoir faire rapidement des choses basiques. Il n'a pas la prétention d'être exhaustif, ce qui rendrait l'information plus difficile à retrouver et à séparer de l'essentiel que je m'efforce de mettre en valeur. 

Gnuplot se présente sous la forme d'un logiciel en ligne de commande que l'on utilise en faisant : 
\begin{verbatim}
gnuplot
\end{verbatim}

Toutes les commandes que je présente peuvent être entrées de manière intéractives dans \textbf{gnuplot}. Je ne présenterais pas cette manière de faire, dans la suite je présenterais une suite d'instruction que j'enregistre dans un fichier (au nom quelconque, mais à qui je donne l'extension \textbf{.gnuplot} pour plus de lisibilité. Afin de s'en servir on fait alors :
\begin{verbatim}
gnuplot fichier.gnuplot
\end{verbatim}

\begin{remarque}
La différence principale entre le script \textbf{*.gnuplot} et l'affichage interactif, c'est que le plot affiché à l'écran (terminal \texttt{x11}) ne reste pas par défaut, il faut ainsi mettre un \texttt{pause(-1)} en fin de script pour que le graphique reste, et un appui sur \touche{Entrée} continue l'exécution du script (et le termine s'il n'y a rien ensuite).
\end{remarque}



\section{Faire un plot 2D}
\subsection{À partir d'un fichier}
Admettons que le fichier \textbf{plot.dat} contienne deux colonnes dans lesquelles il y a respectivement les valeurs de $x$ et $y$ pour notre graphique. Afin d'afficher le graphique il suffit de faire : 
\begin{verbatim}
plot 'plot.dat' using 1:2
\end{verbatim}
On va alors tracer la deuxième colonne en fonction de la première.

\bigskip

On peut aussi tracer plusieurs courbes :
\begin{verbatim}
plot 'plot.dat' using 1:2 title 'courbe1', '' using 1:3 title 'courbe2', \
     '' using 1:4 title 'courbe3', 'plot2.dat' using 1:2 title 'courbe4'
\end{verbatim}
Pour tracer 4 courbes, 3 venant du fichier \textbf{plot.dat}, la 2\ieme, 3\ieme et 4\ieme colonne en fonction de la première et une courbe venant de \textbf{plot2.dat}.


\subsection{Tracer une fonction à partir de la formule}
On peut, au lieu de rentrer un tableau de points, tracer directement une fonction connue : 
\begin{verbatim}
plot sin(x)
\end{verbatim}

Les fonctions dans gnuplot sont les mêmes que les fonctions dans la librairie mathématique Unix à part que les fonctions acceptent des entier des réels ou des complexes comme argument. 

\begin{remarque}
Pour les fonctions qui acceptent ou retourne des angles qui pourraient être donnés en degrés ou en radian (sin(x), cos(x), tant(x), asin(x), acos(x), atan(x), \dots) l'unité peut être sélectionnée par \texttt{set angles} (par défaut, ce sont des radians).
\end{remarque}

On peut alors faire par exemple : 
\begin{verbatim}
plot (sin(x)/x)**2
\end{verbatim}
un sinus cardinal au carré.

Si le nombre de points n'est pas assez élevé, on peut alors rajouter
\begin{verbatim}
set samples 200
\end{verbatim}
où $200$ est le nombre de points servant à tracer la fonction. Si vous êtes en interactif ou que l'option \texttt{samples} est utilisée après le \texttt{plot}, il faut aussi utiliser
\begin{verbatim}
replot
\end{verbatim}

\section{Exporter la courbe}\label{sec:terminal}
Le principe de gnuplot est de sélectionner un terminal où envoyer les données du graphique. par défaut, ce terminal est \textbf{x11}. 

Pour définir un terminal il suffit de rentrer
\begin{verbatim}
set terminal x11
\end{verbatim}
Cette dernière commande est la commande par défaut, celle qui permet d'afficher les graphiques à l'écran.

Dans le mode interactif de gnuplot, on accède à la liste des terminaux via
\begin{verbatim}
help terminal
\end{verbatim}


\subsection{Fichier pdf}
\begin{verbatim}
set terminal pdfcairo
set output 'graphique.pdf'
replot
\end{verbatim}

\begin{remarque}
Le \texttt{replot} n'est utile que si la courbe a déjà été affichée (à l'écran par exemple).
\end{remarque}

\subsection{fichier svg}
\begin{verbatim}
set terminal svg rounded size 450,360
set output 'graphique.svg'
replot
\end{verbatim}




\section{Les options}
\subsection{label}
\begin{verbatim}
set xlabel "axe des abscisses"
set ylabel "axe des ordonnées"
\end{verbatim}

\subsection{échelle logarithmique}
\begin{verbatim}
set logscale x
set logscale y
\end{verbatim}

\subsection{grille}
\begin{verbatim}
set grid
\end{verbatim}

\subsection{Forcer un zoom}
\begin{verbatim}
set xrange [0:5]
\end{verbatim}

\subsection{Texte avancé}
Dans le terminal\footnote{Pour plus de détails sur la définition du terminal, voir \refsec{sec:terminal}} courant, lors de sa définition, il faut rajouter l'option \texttt{enhanced}

\begin{verbatim}
set terminal x11 enhanced
\end{verbatim}

\begin{attention}
Tous les terminaux ne supportent l'affichage de texte avancé (et donc l'option \textbf{enhanced})
\end{attention}


Ceci permet de faire du texte en indice, en exposant et d'accéder aux lettres grecques par exemple. 

On peut alors écrire dans le graphique \verb|x_1 + y^2| qui apparaîtra comme $x_1 + y^2$.

\begin{remarque}
Pas besoin de mettre en mode mathématique, il suffit de l'écrire comme ça.
\end{remarque}


\bigskip

Une différence importante a lieu pour l'affichage des lettres grecques : 
\begin{center}
\begin{tabular}{*{4}{|c|c|}}
\hline
ALPHABET  & SYMBOL  & ALPHABET  & SYMBOL  & alphabet  & symbol  & alphabet  & symbol \\\hline\hline
A  & A  & N  & N  & a  & $\alpha$  & n  & $\nu$\\\hline
B  & B  & O  & O  & b  & $\beta$  & o  & o\\\hline
C  & X  & P  & $\Pi$  & c  & $\chi$  & p  & $\pi$\\\hline
D  & $\Delta$  & Q  & $\Theta$  & d  & $\delta$  & q  & $\theta$\\\hline
E  & E  & R  & P  & e  & $\epsilon$  & r  & $\rho$\\\hline
F  & $\Phi$  & S  & $\Sigma$  & f  & $\phi$  & s  & $\sigma$\\\hline
G  & $\Gamma$  & T  & T  & g  & $\gamma$  & t  & $\tau$\\\hline
H  & H  & U  & Y  & h  & $\eta$  & u  & $\upsilon$\\\hline
I  & I  & V  & $\varsigma$  & i  & $\iota$  & v & $\varpi$\\\hline
J & $\vartheta$ & W  & $\Omega$ & j & $\varphi$ & w  & $\omega$\\\hline
K  & K  & X  & $\Xi$  & k  & $\kappa$  & x  & $\xi$\\\hline
L  & $\Lambda$  & Y  & $\Psi$  & l  & $\lambda$  & y  & $\psi$\\\hline
M  & M  & Z  & Z  & m  & $\mu$  & z  & $\zeta $\\\hline
\end{tabular}
\end{center}

Ainsi, pour faire la lettre minuscule $\alpha$ il faut faire : 
\begin{verbatim}
{/Symbol a}
\end{verbatim}

\begin{attention}
Ce n'est pas un anti-slash comme les habitudes \LaTeX{} pourraient nous le faire croire.
\end{attention}




\printindex
\end{document}